#!/usr/bin/env node
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("fs")):"function"==typeof define&&define.amd?define(["fs"],t):t(e.fs)}(this,function(e){var t=function(e,t,o){return"https://img.shields.io/badge/"+e+"-"+t+"-"+o+".svg"},o=["branches","functions","lines","statements"],r=new function(){var r=this;this.reportKeys=o,this.createReadme=function(t){return void 0===t&&(t="./README-template.md"),e.existsSync(t)?(e.copyFileSync(t,"./README.md"),console.log("[1m[32m","Template read succesfully. ./README.md created!"),!0):(console.log("[1m[31m","Error: ./README-template.md file not not found."),console.log("[1m[32m","You must have a ./README-template.md created. Please read the documentation."),!1)},this.insertBadges=function(t){void 0===t&&(t="./coverage/coverage-summary.json");var o=!1,n=r.getCoveragePath(t);if(e.existsSync(n)){var i=e.readFileSync(n,"utf8");if(!i.length)return console.log("[1m[31m","Malformed coverage report. Please run Jest again"),!1;console.log("[1m[32m","Reading coverage file from "+n);var a=JSON.parse(i),s=e.readFileSync("./README.md","utf8");r.reportKeys.forEach(function(t){var n=r.getBadge(a,t);n.length?(s=s.replace("#"+t+"#",n),console.log("[1m[32m","Badge for",t,"updated with:",n),o=!0,e.writeFileSync("./README.md",s,"utf8")):o=!1}),r.getBuildStatus()}else console.log("[1m[31m","Error: "+n+" file not found. Is it at the default location?"),console.log("[1m[33m","Do you have Jest installed? If so, is it properly configured? If you do, then run me"),console.log("[1m[33m","by passing args i.e. npm run jest-badges-readme --coverageDir='my-custom-coverage-folder'"),o=!1;return o},this.getBuildStatus=function(o){void 0===o&&(o="./.buildstatus");var r=t("Build","Passing","brightgreen"),n=!1;if(e.existsSync(o)){var i=e.readFileSync("./README.md","utf8"),a=e.readFileSync(o,"utf8");"ok"===a?(r=t("Build","Passing","brightgreen"),n=!0):"nok"===a&&(r=t("Build","Failing","brightred"),n=!1),i=i.replace("#buildstatus#",r),e.writeFileSync("./README.md",i,"utf8"),console.log("[1m[32m","Writing building status",a,"with URL:",r)}else n=!1;return n},this.getCoveragePath=function(e){var t=e,o="",r=process.argv.filter(function(e){if(e.indexOf("coverage")>=0)return e}).toString();return r&&(o=r.replace("--coverageDir=","")),o&&r.length>0&&(t=o+"/coverage-summary.json"),t},this.getBadge=function(e,t){if(!(e&&e.total&&e.total[t]))return console.log("[1m[31m","Malformed coverage report for the key "+t+". Please run Jest again."),"";var o=e.total[t].pct;return function(e,t){return"https://img.shields.io/badge/Coverage-"+e+encodeURI("%")+"-"+t+".svg"}(o,r.getColor(o))},this.getColor=function(e){return e<80?"red":e<90?"yellow":"brightgreen"}};r.createReadme()&&r.insertBadges()});
//# sourceMappingURL=index.umd.js.map
